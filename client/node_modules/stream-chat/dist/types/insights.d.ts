/// <reference types="ws" />
import { StableWSConnection } from './connection';
import WebSocket from 'isomorphic-ws';
import { LiteralStringForUnion, UnknownType } from './types';
export declare type InsightTypes = 'ws_fatal' | 'ws_success_after_failure';
export declare class InsightMetrics {
    connectionStartTimestamp: number | null;
    wsConsecutiveFailures: number;
    wsTotalFailures: number;
    instanceClientId: string;
    constructor();
}
export declare function buildWsFatalInsight<ChannelType extends UnknownType = UnknownType, CommandType extends string = LiteralStringForUnion, UserType extends UnknownType = UnknownType>(connection: StableWSConnection<ChannelType, CommandType, UserType>, event: WebSocket.CloseEvent): {
    ready_state: number | undefined;
    url: string;
    api_key: string;
    start_ts: number | null;
    end_ts: number;
    auth_type: "anonymous" | "jwt";
    token: string | undefined;
    user_id: string;
    user_details: import("./types").UserResponse<UserType>;
    device: import("./types").BaseDeviceFields | undefined;
    client_id: string | undefined;
    ws_details: WebSocket | undefined;
    ws_consecutive_failures: number;
    ws_total_failures: number;
    request_id: string | undefined;
    online: boolean | null;
    user_agent: string | null;
    instance_client_id: string;
    err: {
        wasClean: boolean;
        code: number;
        reason: string;
    };
};
export declare function buildWsSuccessAfterFailureInsight<ChannelType extends UnknownType = UnknownType, CommandType extends string = LiteralStringForUnion, UserType extends UnknownType = UnknownType>(connection: StableWSConnection<ChannelType, CommandType, UserType>): {
    ready_state: number | undefined;
    url: string;
    api_key: string;
    start_ts: number | null;
    end_ts: number;
    auth_type: "anonymous" | "jwt";
    token: string | undefined;
    user_id: string;
    user_details: import("./types").UserResponse<UserType>;
    device: import("./types").BaseDeviceFields | undefined;
    client_id: string | undefined;
    ws_details: WebSocket | undefined;
    ws_consecutive_failures: number;
    ws_total_failures: number;
    request_id: string | undefined;
    online: boolean | null;
    user_agent: string | null;
    instance_client_id: string;
};
//# sourceMappingURL=insights.d.ts.map